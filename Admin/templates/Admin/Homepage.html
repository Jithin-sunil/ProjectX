{% extends 'Admin/Header.html' %}
{% block content %}

<div class="container-fluid py-4">
    <h3 class="fw-bold mb-4 text-center">Admin Dashboard Overview</h3>

    <!-- Row 1: Stats -->
    <div class="row g-3 mb-4">
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Users</h6>
                <h3>{{ total_users }}</h3>
            </div>
        </div>
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Advocates</h6>
                <h3>{{ total_advocates }}</h3>
            </div>
        </div>
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Police Stations</h6>
                <h3>{{ total_police }}</h3>
            </div>
        </div>
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Cases</h6>
                <h3>{{ total_cases }}</h3>
            </div>
        </div>
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Bookings</h6>
                <h3>{{ total_bookings }}</h3>
            </div>
        </div>
        <div class="col-md-2 col-sm-6">
            <div class="card text-center shadow-sm p-3">
                <h6>Complaints</h6>
                <h3>{{ total_complaints }}</h3>
            </div>
        </div>
    </div>

   

    <!-- Row 3: Recent Bookings and Complaints -->
    <div class="row g-4 mb-4">
        <div class="col-lg-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3">Recent Bookings</h5>
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped align-middle">
                            <thead class="table-light">
                                <tr>
                                    <th>ID</th>
                                    <th>User</th>
                                    <th>Advocate</th>
                                    <!-- <th>Status</th> -->
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for b in recent_bookings %}
                                <tr>
                                    <td>{{ b.id }}</td>
                                    <td>{{ b.user.user_name }}</td>
                                    <td>{{ b.advocate.advocate_name }}</td>
                                    <!-- <td>{{ b.booking_status }}</td> -->
                                    <td>{{ b.booking_date }}</td>
                                </tr>
                                {% empty %}
                                <tr><td colspan="5" class="text-center">No recent bookings</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6">
            <div class="card shadow-sm">
                <div class="card-body">
                    <h5 class="fw-semibold mb-3">Recent Complaints</h5>
                    <ul class="list-group">
                        {% for c in recent_complaints %}
                        <li class="list-group-item">
                            <strong>{{ c.user.user_name }}</strong> â€” {{ c.complaint_title }}<br>
                            <small class="text-muted">{{ c.complaint_date }}</small>
                        </li>
                        {% empty %}
                        <li class="list-group-item text-center">No recent complaints</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Row 4: Top Advocates -->
    <div class="row g-4">
        <h5 class="fw-semibold mb-3">Top Advocates</h5>
        {% for adv in top_advocates %}
        <div class="col-sm-6 col-xl-3">
            <div class="card overflow-hidden shadow-sm rounded-2">
                <div class="position-relative">
                    <img src="{{ adv.advocate_photo.url }}" class="card-img-top rounded-0" style="height:220px;object-fit:cover;">
                </div>
                <div class="card-body pt-3 p-4 text-center">
                    <h6 class="fw-semibold fs-5">{{ adv.advocate_name }}</h6>
                    <p class="text-muted mb-1">{{ adv.advocate_email }}</p>
                    <small>{{ adv.advocate_contact }}</small>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center">No advocates available</p>
        {% endfor %}
    </div>

    <!-- Footer -->
    <div class="py-4 text-center text-muted">
        <p>Design and Developed by <a href="https://adminmart.com/" target="_blank" class="text-decoration-none">AdminMart</a></p>
    </div>
</div>

</script>

</body>
</html>

{% endblock %}